# The project_id is now managed by remotes.
project_id = "yrnbbkljrdwoyqjpswtv"

# Remote configuration for the 'melofy' client (production/melofy branch)
[remotes.melofy]
project_id = "vezdxxqzzcjkunoaxcxc"

# Remote configuration for the 'chattalyst' client (production/chattalyst branch)
[remotes.chattalyst]
project_id = "yrnbbkljrdwoyqjpswtv"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322
major_version = 17

[studio]
enabled = true
port = 54323

[functions.summarize-conversation]
verify_jwt = false

[functions.whatsapp-webhook]
verify_jwt = false
import_map = "./functions/whatsapp-webhook/import_map.json"
entrypoint = "./functions/whatsapp-webhook/index.ts"

[functions.knowledge-base]
verify_jwt = false

[functions.analyze-sentiment]
verify_jwt = false

[functions.smart-chunking]
verify_jwt = false

[functions.add-new-customers]
verify_jwt = false

[functions.ai-agent-handler]
verify_jwt = true
import_map = "./functions/import_map.json"

[functions.analyze-sentiment-batch]
verify_jwt = false

[functions.check-csv-contacts]
verify_jwt = false

[functions.edit-customer-contact]
verify_jwt = false

[functions.end-agent-session]
verify_jwt = false

[functions.evolution-api-handler]
verify_jwt = false

[functions.get-integration-access]
verify_jwt = false

[functions.get-media-base64]
verify_jwt = false

[functions.invite-user]
verify_jwt = false

[functions.licensed-signup]
verify_jwt = false

[functions.list-knowledge-documents]
verify_jwt = false

[functions.query-agent]
verify_jwt = false

[functions.query-data-with-ai]
verify_jwt = false

[functions.segment-handler]
verify_jwt = false

[functions.send-message-handler]
verify_jwt = false

[functions.suggest-ai-prompt]
verify_jwt = false

[functions.vectorize-schema]
verify_jwt = false

# New auth section from the diff
[auth]
enabled = true
site_url = "http://localhost:3000"

additional_redirect_urls = []
jwt_expiry = 3600
enable_refresh_token_rotation = true
refresh_token_reuse_interval = 10

[auth.mfa]
max_enrolled_factors = 10

[auth.mfa.totp]
enroll_enabled = false
verify_enabled = false

[auth.mfa.phone]
enroll_enabled = false
verify_enabled = false

[auth.email]
enable_signup = true
double_confirm_changes = true
enable_confirmations = true
secure_password_change = false
max_frequency = "1m0s"
otp_length = 6
otp_expiry = 3600
